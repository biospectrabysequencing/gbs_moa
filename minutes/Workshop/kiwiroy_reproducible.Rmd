---
title: "Collaborate and Replicate"
author: "Roy Storey"
date: "18/03/2015"
output:
  ioslides_presentation:
    widescreen: yes
  beamer_presentation: default
  slidy_presentation: default
---

## Intro

- Reproducible Research
- using [GitHub](http://github.com)
- using [Moa](https://github.com/mfiers/moa)

## The Reproducibility Spectrum

![Spectrum](http://www.ncbi.nlm.nih.gov/pmc/articles/PMC3383002/bin/nihms382015f1.jpg)

<div align=right><span style="font-size: 0.5em">Image from *doi: [10.1126/science.1213847](http://dx.doi.org/10.1126/science.1213847)*</span></div>

### aim

* towards right hand side
* evaluate findings
* journals also moving this way

## Best Practices

* Wilson G, Aruliah DA, Brown CT, Chue Hong NP, Davis M, et al. (2014) Best Practices for Scientific Computing. PLoS Biol 12(1): e1001745. doi: [10.1371/journal.pbio.1001745](http://dx.doi.org/10.1371/journal.pbio.1001745)

* Write programs for people, not computers. (literate programming)
* Make incremental changes.
    + Use a **version control system**.
* Collaborate.
    + Use pre-merge code reviews.
    + Use pair programming when bringing someone new up to speed and when tackling particularly tricky problems.
    + Use an issue tracking tool.
* Don't repeat yourself (or others).
    + Every piece of data must have a single authoritative representation in the system.
    + Modularize code rather than copying and pasting.
    + Re-use code instead of rewriting it.


##

- Using GitHub
    + collaboration cross company 
    + AGPL open source license
    + github flow / tasks
    + success of GitHub
- Moa
    + reproducible research


##

![github](images/githuboctocat.jpg)

* Hosted solution
* Administration
* Network traversal


## Reproducible Research

- Tenants
- Tools
- Behaviour


## Summary of Best Practices




Wilson G, Aruliah DA, Brown CT, Chue Hong NP, Davis M, et al. (2014) Best Practices for Scientific Computing. PLoS Biol 12(1): e1001745. doi:10.1371/journal.pbio.1001745

1. Write programs for people, not computers.
    + A program should not require its readers to hold more than a handful of facts in memory at once.
    + Make names consistent, distinctive, and meaningful.
    + Make code style and formatting consistent.
2. Let the computer do the work.
    + Make the computer repeat tasks.
    + Save recent commands in a file for re-use.
    + Use a build tool to automate workflows.
3. Make incremental changes.
    + Work in small steps with frequent feedback and course correction.
    + Use a version control system.
    + Put everything that has been created manually in version control.
4. Don't repeat yourself (or others).
    + Every piece of data must have a single authoritative representation in the system.
    + Modularize code rather than copying and pasting.
    + Re-use code instead of rewriting it.
5. Plan for mistakes.
    + Add assertions to programs to check their operation.
    + Use an off-the-shelf unit testing library.
    + Turn bugs into test cases.
    + Use a symbolic debugger.
6. Optimize software only after it works correctly.
    + Use a profiler to identify bottlenecks.
    + Write code in the highest-level language possible.
7. Document design and purpose, not mechanics.
    + Document interfaces and reasons, not implementations.
    + Refactor code in preference to explaining how it works.
    + Embed the documentation for a piece of software in that software.
8. Collaborate.
    + Use pre-merge code reviews.
    + Use pair programming when bringing someone new up to speed and when tackling particularly tricky problems.
    + Use an issue tracking tool.

## Git

- 

## GitHub

```{r engine="bash", results="hide", echo="FALSE"}
## https://support.rstudio.com/hc/communities/public/questions/200694007-rpostback-askpass
export SSH_ASKPASS="/usr/lib/rstudio-server/bin/postback/rpostback-askpass"
export GIT_SSH="ssh -o ForwardX11=no -o ForwardX11Trusted=no"
unset DISPLAY
```

```{r engine="bash", cache="TRUE"}
git clone git@github.com:biospectrabysequencing/gbs_moa.git
cd gbs_moa
ls -l
```

## Moa

*Command line workflows in bioinformatics*


* Organized:

Moa facilitates project organization in many (smaller and more major) ways by providing a uniform way to capture commands as Moa jobs. Each Moa job is linked to a specific directory, which contains all configuration, template, data, and intermediate data available as files within the directory structure.

* Documented
* Reproducible
* Reusable & Shareable:
* Flexible:

## Automation

- Travis
- Quality Control

## Summary


## Extras

* reduce barriers to collaboration
* UX

## Acknowledgements

![NZGL](images/NZGL-logo.jpg)
